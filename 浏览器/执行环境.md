# 1. 结构
执行环境分成两个部分，堆和栈

# 2. 调用栈结构
调用栈内的一个元素叫做执行上下文，分成四个部分：
1. 变量环境：函数内定义的变量
2. 词法环境：块级作用域定义的变量，以栈形式存储，执行完块级作用域就出栈
3. outer：词法上的上一层代码块，连接作用域链，查找变量的时候会逐层查找outer
4. this：指向当前函数的调用者，没有则指向window

- 如何寻找一个变量：先查当前执行上下文的词法环境，然后查找变量环境，然后再沿着作用域链查找下一个执行上下文，继续词法环境，变量环境这样子查找下去

- 当产生闭包的时候，整个元素会只留下一部分变量供其他地方使用

# 3. v8是怎样构建js执行环境的
1. 编译代码
2. 进调用栈：生成全局执行上下文
3. 变量环境：把所有定义的变量做变量提升，函数在var的后面定义，重名情况下优先级更高
4. 词法环境：碰到代码块中定义变量就往词法环境中新增对应的记录
5. 碰到一个新的函数就新增一个函数执行上下文并且进栈
6. 函数执行完毕后函数对应的执行上下文出栈

# 闭包的定义是什么
js中，内部函数可以沿着作用域链访问外部函数的变量，如果一个外部函数里面返回了一个内部函数，即使外部函数已经执行完毕了，可是返回的内部函数仍然能访问外部函数的部分变量，这部分变量的集合就是闭包。
