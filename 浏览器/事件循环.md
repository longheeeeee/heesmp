js运行时会有一个队列来存放异步任务，包括网络请求，用户io等事件都会在这个队列中等待js执行

js有一个event loop机制来执行这个队列，队列中的任务分成宏任务和微任务，当js触发loop的时候
1. 从队列中出队一个宏任务，然后执行，没有宏任务的直接检查微任务
2. 执行过程中有可能产生宏任务和微任务，宏任务添加到队列末端，微任务添加到微任务队列
3. 宏任务执行完成后执行微任务检查点，如果当前微任务队列有任务就执行，一直到微任务队列被清空
4. 尝试渲染，如果浏览器判断当前不需要渲染（时间没到等），就不需要渲染，如果需要的话，其中就会调用`requestAnimationFrame`
5. 如果当前loop没有执行宏任务或者微任务或者渲染，就执行`requestIdleCallback`