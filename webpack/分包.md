分包/外部依赖，主要分成三种：externals、DLL、模块联邦
# externals
externals是webpack的一个配置，作用是可以把某些依赖从输出的bundle中排除，运行时从外部环境获取。可以有效减少包体积。

一般用于两种情况
1. 写库的时候，可以把react/lodash等通用依赖设置成externals，库代码打包的时候就不会把这些通用依赖给打包到文件中，这样只要保证使用这个库的项目存在这些依赖，库就能获取到
2. 使用CDM引入通用依赖，不是经常变动的包可以使用CDN进行加载，而不是打包到项目文件中，需要确保外部依赖包在项目代码之前执行

原理是外部依赖在执行初始化的时候，会把要输出的对象放在window下面，当依赖方需要使用的时候，就会去window上进行查找
# DLL
可以将大量可复用且不会经常更新的库进行提前编译，后续要使用的时候就在运行时可以直接获取，不需要重新编译
- 该方案已经过时，现在可以使用webpack5自带的多级缓存方案去进行缓存
## webpack5多级缓存方案
- 功能形式：通过plugin形式承载
- 缓存时机：在构建模块依赖图、生成代码、生成chunk，三个地方都提供了缓存窗口。
- 缓存形式：可以选择使用内存缓存和文件缓存两个方案。
- 缓存判断：使用timestamp判断文件上次修改，或者使用etag进行文件内容计算，或者两者结合，在时间判断失效的情况下计算etag

# 模块联邦
我理解是分包的升级版，使用CDN的方式共享代码。比起微前端是主应用加载子应用，模块联邦每个项目都可以作为消费者，加载其他项目提供的模块，同时也能作为生产者，提供模块给其他项目消费。

使用插件形式承载，插件主要配置有四个
1. name：模块名称，用于标识模块，使得其他项目可以正确引用该模块
2. filename：当前模块的输出入口，其他模块通过这个文件名查找模块
3. exposes：需要导出的模块，是一个数组
4. remotes：当前项目所依赖的其他项目的模块，是一个map
5. shared：指定需要共享的模块，如果两个模块都同时shared一个依赖，则可以减少打包体积

加载的时候使用webpack的异步加载功能，使用jsonp来进行远程拉取。

优点：当一个组件升级的时候，其他所有依赖这个组件的项目都不需要重新走本地升级、编译、打包、发布这个流程，直接就能使用最新版本。


# 文档
- [外部扩展(Externals)](https://webpack.docschina.org/configuration/externals/)
- [『Webpack系列』—— externals用法详解](https://juejin.cn/post/6844904190083350542?searchId=20240730202351FBE85EE1A928BE6F59E5)
- [超详细讲解Webpack5缓存实现原理](https://juejin.cn/post/7231809738203086906?searchId=2024073021012511A5A5FFEF1246E7D324)
- [模块联邦实践](https://juejin.cn/post/7252605744255057979?searchId=202407302015426D04F0CC9D4E83F855BD)
- [微前端实践--webpack5模块联邦](https://juejin.cn/post/6963326546606030856)