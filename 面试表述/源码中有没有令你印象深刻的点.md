# 1. qiankun
js多例沙箱创建的时候，会把window上不可配置的属性复制一份到fakeWindow上，正常来说fakeWindow上应该是没有属性才对

直接搜索问题没找到，查看各种源码解析也没有发现有人讨论这个问题，因为qiankun是国人写的，去英文网站上结果反而更少了，查询了github的issue，也跟同事讨论了，看了好几天也没有人能知道问题所在，后来在代码的某个地方发现了有注释提了一下，是proxy的兼容问题

在proxy使用上有一个相关规定：
> 如果当前字段不存在于目标对象或者在目标对象上是configurable的，该字段不能被报告成non-configurable

所以用户使用proxy访问window上不可配置的属性的属性描述符时，因为当前字段不在proxy上，所以触发了这个规定，不能把该字段返回成不可配置的；所以需要把不可配置的复制一份到proxyWindow上

# 2. 如果是从学习的角度来说的话
如果是从学习的角度的话，vue源码中大量使用到了工厂模式，比如说patch方法的生成，vue构造方法的生成等，都是针对不同平台传入不同配置来实现，还有mergeOptions，根据合并策略来合并配置。

这两个在写组件的时候用到了很多，比如封装多种不同sdk的库会使用到工厂模式来抹平不同sdk之间的差异，比如埋点的sdk、公司接入了多种客服sdk、小程序或者h5中微信的登录授权或者支付等。对于mergeOptions来说，封装axios请求组件的时候用到了，默认会有一层公司通用的拦截器来添加token、去除vo封装等等，用户可以传入多层拦截器来做额外的处理，或者说添加一些header来覆盖掉默认添加的一些header