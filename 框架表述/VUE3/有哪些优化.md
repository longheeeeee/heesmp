# 源码优化
使用了monorepo和ts来管理开发源码，代码上做了拆分，模块解藕，源码更容易阅读，有一些库比如响应式库可以单独使用
# 性能优化
## 源码体积优化
1. 删除了一些冷门的功能，比如filter
2. 引入了tree-shaking技术，用户可以按需引入，减少体积
## 数据劫持优化
### vue2的缺陷：
1. 不能检测对象属性的添加和删除，需要使用$set来实现
2. 会把对象整个遍历，每一层都做响应式处理，性能开销大
### vue3的改进：
1. 使用proxy来监听，可以检测对象属性的增加和删除
2. 不会把整个对象每一层都添加响应式处理，在getter中递归响应式，访问到的对象才做处理
## 编译优化
新增了blockTree来减少patch过程中对非动态节点的处理，优化了slot、事件侦听函数、重写了diff算法
## 语法优化：composition API
### 优化结构
从option API转换成composition API，可以把某个逻辑点相关的代码全都放到同一个函数中
### 优化mixin
option API的mixin会有命名冲突和数据来源不清晰的问题，使用composition API可以知道数据来源，并且修改命名
## 引入了RFC来控制迭代
使用RFC对改动做讨论，减少错误


