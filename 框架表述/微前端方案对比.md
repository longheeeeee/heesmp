微前端实现方案：
1. iframe
2. web Components
3. 路由分发
4. single-spa
5. qiankun
6. icestark
7. emp

### 1. iframe
1. 浏览器刷新导致iframe url丢失，前进后退按钮无法使用
2. 弹窗无法全局
3. 数据共享麻烦，跨域的情况下要使用postmessage
4. 子应用切换会造成大量资源更换
5. 无法实现seo

### 2. web components
1. 可以以此基础实现微前端，可是兼容性很差

### 3. 路由分发
使用nginx进行路由切换
1. 子应用切换会刷新页面，消耗大量资源以及用户体验很差
2. 共享数据只能使用本地存储

### 4. qiankun

### 5. icestark
1. 体量更轻，没有很强的沙箱机制，主要以内部规范和约束为主

### 6. emp
1. 基于webpack5的模块联邦实现
2. 去中心化，子应用可以再引入子应用
3. 实现模块共享（qiankun在设计理念上不同意这个事情）
4. 没有沙箱


## 1. 模块联邦
1. 去中心化，不需要一个主应用，应用之间可以互相暴露和加载模块，以实现依赖共享和远程加载，一个应用可以是一个生产者，也可以是一个消费者
2. 消费者需要配置依赖的模块，生产者需要配置暴露出去的模块
3. 打包出来的结果有几个，一个是当前项目的入口文件，一个是entry文件，提供给其他项目依赖当前项目的入口，其他暴露出去的模块单独形成文件
4. 消费者下载依赖的项目entry文件，然后执行项目代码，用户import远程依赖的时候从对应项目entry文件中获取到模块的地址，并且使用jsonp加载，生成一个Promise.all，全部加载完成后再执行用户回调


2024更新
# why not iframe
- 是一个全新并且完整的文档环境，大幅增加内存和计算资源
- 和上层应用不是一个上下文，会导致一些问题
    - 事件无法冒泡，不支持主应用做一些整体操作，比如劫持
    - 跳转路径无法同步，丢失路由状态
    - 视图宽高限制
    - 应用加载失败等错误事件上层无法感知
- 无法共享依赖库
- 通讯繁琐，限制多
