# 什么是服务端渲染？服务端渲染的原理是什么？
服务端渲染其实是早期JSP前后端不分家时期的渲染方式，服务端获取到页面的数据之后，填充到页面之前，再返回给客户端
后面是因为页面越来越大，服务端压力越来越大，所以后面就产生出来CSR的渲染方式，渲染和计算过程在浏览器执行
但是因为CSR无法顺利进行SEO，渲染速度慢等问题，服务端渲染就又发挥作用了
大概流程就是
1. 服务端使用react的react-dom/server提供的相关api，比如renderToString，在服务器执行渲染代码和获取数据，组合生成带有数据的HTML后返回给浏览器
2. 浏览器获取到html后再对HTML绑定交互事件，这个就是水合

# 了解渐进式渲染和流式渲染吗
渐进式渲染指的是页面在渲染的时候可以先渲染占位符，再发起请求获取对应组件，组件获取完成后再渲染到页面上
流式渲染指的是一种技术，利用了HTML可以边解析边渲染的特性，先行返回一部分内容，浏览器可以先渲染出部分页面，等待后续内容返回后再做渲染
一般这两种技术都可以互相配合，在react中就可以使用suspense来包裹一些异步组件，在fallback中展示loading信息，通过流式渲染，HTML会先返回带有loading占位符的结构，然后服务器处理完组件数据后，再添加到HTML上返回，HTML在解析组件的时候就会把原来的loading占位符替换掉

# RSC是什么？说说你对RSC的理解
我个人的理解，RSC就是针对组件级别的SSR
正常的SSR就是服务端获取页面数据，渲染出HTML，返回到浏览器进行渲染，最后浏览器对页面做水合
RSC就是把这套流程拆分成组件级别的维度，先渲染出组件的占位符，然后组件在服务端进行渲染，结果通过RSC payload返回给浏览器，然后浏览器解析RSC payload进行内容的替换，最后根据组件是服务端组件还是客户端组件来决定是否需要水合
解决了两个问题
1. 服务端组件不需要打包依赖，依赖都在服务端执行，计算出结果后只返回数据，减少了代码体积
2. 局部渲染和水合，只有客户端组件才需要水合，并且水合可以根据组件维度进行，不需要等待整个页面一起水合

# 客户端组件和服务端组件的区别是什么
流程上的区别
1. 服务端组件只需要在服务端渲染完成后就结束了
2. 客户端组件需要现在服务端进行一次渲染，然后再在浏览器进行水合，添加事件处理
所有有状态的/用到浏览器api的/有事件的组件都是客户端组件

# Nextjs性能优化怎么做
除了通用的性能优化之外，next最核心的优化就是两个
1. 善用缓存，分成服务端/客户端两个维度，和请求/组件两个维度两两组合的缓存
2. 拆分服务端组件和客户端组件，把需要绑定事件的组件都使用客户端组件单独封装，尽量下沉客户端组件，并且添加suspense来渐进式渲染

# csr ssr ssg isr
csr客户端渲染，在next里面跟react一样，在useEffect里面发起请求然后进行渲染
ssr服务端渲染，在一个page里面写getServerSideProps来发起请求，返回的数据会作为参数传递给页面组件
ssg静态站点生成，在构建阶段就生成，后面不进行更新。在page中写getStaticProps，跟ssr的getServerSideProps一致
isr增量静态再生，在规则中进行异步更新页面，比如n秒之后会更新缓存。在getStaticProps里面添加revalidate，写上秒数